{"version":3,"file":"react-horizontal-auto-scroll.cjs.development.js","sources":["../src/Helper.ts","../src/index.tsx"],"sourcesContent":["import { ScrollerOptionalProps, ScrollerProps } from \".\";\n\nexport const registerEvent = (el: HTMLInputElement | null, props: ScrollerOptionalProps) => {\n\n    if (el != null) {\n        let d: HTMLInputElement = el;\n        const wheel = (evt: WheelEvent) => {\n            let deltaY = evt.deltaY;\n            scrollhandle(evt, deltaY, props, d)\n        }\n        document.addEventListener('wheel', wheel, { passive: false });\n        var ts: number;\n        const touchstart = (e: TouchEvent) => {\n            console.log(e)\n            ts = e.changedTouches[0].clientY;\n        }\n        document.addEventListener('touchstart', touchstart);\n        const touchmove = (evt: TouchEvent) => {\n            var te = evt.changedTouches[0].clientY;\n            let deltaY: number;\n            if (ts > te) {\n                deltaY = 100;\n            } else {\n                deltaY = -100;\n            }\n            scrollhandle(evt, deltaY, props, d)\n        }\n        document.addEventListener('touchmove', touchmove, { passive: false });\n        return function cleanUp() {\n            document.removeEventListener('wheel', wheel);\n            document.removeEventListener('touchstart', touchstart);\n            document.removeEventListener('touchmove', touchmove)\n            console.log(\"event listeners removed\");\n        }\n    }\n    return () => {\n        console.log(\"no event listeners removed\");\n    }\n}\n\nexport const wait = (ms: number) => new Promise((resolve) => {\n    setTimeout(() => { resolve(0); }, ms);\n})\n\nexport function isInViewport(element: Element) {\n    const rect = element.getBoundingClientRect();\n    let height = rect.bottom - rect.top;\n    return (\n        rect.top >= 0 - height / 2 &&\n        rect.left >= 0 &&\n        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) + height / 2 &&\n        rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n    );\n}\nfunction element_center_postion(element: Element) {\n    const rect = element.getBoundingClientRect();\n    let height = rect.bottom - rect.top;\n    return rect.top + window.scrollY - height / 4;\n}\nconst scrollhandle = (evt: Event, deltaY: number, props: ScrollerProps, d: Element) => {\n    let inViewport = isInViewport(d);\n    let isScrollable = d.scrollWidth > window.innerWidth;\n    let scrollMax = d.scrollWidth;\n    let sign = deltaY / Math.abs(deltaY);\n    let scrollDistance = sign * (Math.max(Math.abs(deltaY), 120) || 120) * Math.abs(Math.min(props.scrollSpeed || 3, 10));\n    if (props.isSlideShow) {\n        scrollDistance = sign * window.innerWidth;\n    }\n    if (deltaY > 0) {\n        //down\n        if (isScrollable && inViewport && d.scrollLeft < scrollMax - window.innerWidth) {\n            console.log(d.scrollWidth, window.innerWidth)\n            evt.preventDefault();\n            window.scroll({\n                top: element_center_postion(d),\n                behavior: \"smooth\"\n            });\n            d.scrollTo({\n                top: 0,\n                left: d.scrollLeft + scrollDistance,\n                behavior: 'smooth'\n            });\n        }\n    } else {\n        //up\n        if (props.reverse) {\n            if (isScrollable && inViewport && d.scrollLeft > 0) {\n                console.log(d.scrollWidth, window.innerWidth)\n                evt.preventDefault();\n                //d.scrollLeft += evt.deltaY;\n                window.scroll({\n                    top: element_center_postion(d),\n                    behavior: \"smooth\"\n                });\n                d.scrollTo({\n                    top: 0,\n                    left: d.scrollLeft + scrollDistance,\n                    behavior: 'smooth'\n                });\n            }\n        }\n    }\n}","import * as React from 'react';\n// import { v4 as uuidv4 } from 'uuid';\nimport { registerEvent } from './Helper';\n\n\n\n\n// Optional props\nexport interface ScrollerOptionalProps {\n  scrollSpeed?: number, //1-10,\n  isSlideShow?: boolean,\n  reverse?: boolean,\n}\n\n// Combine required and optional props to build the full prop interface\nexport interface ScrollerProps\n  extends\n  ScrollerOptionalProps, React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement> { }\n\n// Use the optional prop interface to define the default props\nconst defaultProps: ScrollerOptionalProps = {\n  scrollSpeed: 3,\n  isSlideShow: false,\n  reverse:false\n};\n\nconst Scroller = (props: ScrollerProps) => {\n  //let [id, setId] = React.useState<string>();\n  let sc = React.useRef<HTMLInputElement>(null)\n  let { scrollSpeed, isSlideShow, reverse,children, ...rest } = props;\n  React.useEffect(() => {\n    //let uniqueId = \"_\" + uuidv4();\n    //setId(uniqueId);\n    let scProps :ScrollerOptionalProps = {\n      scrollSpeed,\n      isSlideShow,\n      reverse\n    }; \n\n    const element = sc.current;\n    \n    return registerEvent(element, scProps);\n  }, [sc]);\n  return (<div ref={sc} {...rest}>{children}</div>);\n};\nScroller.defaultProps = defaultProps;\nexport default Scroller;"],"names":["registerEvent","el","props","d","wheel","evt","deltaY","scrollhandle","document","addEventListener","passive","ts","touchstart","e","console","log","changedTouches","clientY","touchmove","te","cleanUp","removeEventListener","isInViewport","element","rect","getBoundingClientRect","height","bottom","top","left","window","innerHeight","documentElement","clientHeight","right","innerWidth","clientWidth","element_center_postion","scrollY","inViewport","isScrollable","scrollWidth","scrollMax","sign","Math","abs","scrollDistance","max","min","scrollSpeed","isSlideShow","scrollLeft","preventDefault","scroll","behavior","scrollTo","reverse","defaultProps","Scroller","sc","React","children","rest","_objectWithoutPropertiesLoose","_excluded","scProps","current","ref"],"mappings":"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"}